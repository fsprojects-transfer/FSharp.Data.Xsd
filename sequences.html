<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>Sequence and Choice
</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="description" content="Xml Type Provider based on Xml Schema"/>
    <meta name="author" content="Giacomo Citi"/>

    <script src="https://code.jquery.com/jquery-1.8.0.js"></script>
    <script src="https://code.jquery.com/ui/1.8.23/jquery-ui.js"></script>
    <script src="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/js/bootstrap.min.js"></script>
    <link href="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/css/bootstrap-combined.min.css" rel="stylesheet"/>

    <link type="text/css" rel="stylesheet" href="/FSharp.Data.Xsd/content/style.css" />
    <script type="text/javascript" src="/FSharp.Data.Xsd/content/tips.js"></script>
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="container">
      <div class="masthead">
        <ul class="nav nav-pills pull-right">
          <li><a href="http://fsharp.org">fsharp.org</a></li>
          <li><a href="http://github.com/fsprojects/FSharp.Data.Xsd">github page</a></li>
        </ul>
        <h3 class="muted"><a href="/FSharp.Data.Xsd/index.html">FSharp.Data.Xsd</a></h3>
      </div>
      <hr />
      <div class="row">
        <div class="span9" id="main">
          
<h1><a name="Sequence-and-Choice" class="anchor" href="#Sequence-and-Choice">Sequence and Choice</a></h1>
<p>A <code>sequence</code> is the most common way of structuring elements in a schema.</p>
<p>The following xsd defines <code>foo</code> as a sequence made of an arbitrary number
of <code>bar</code> elements followed by a single <code>baz</code> element.</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp">    <span class="k">type</span> <span class="i">T</span> <span class="o">=</span> <span class="i">XmlProvider</span><span class="o">&lt;</span><span class="i">Schema</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">        &lt;xs:schema xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot; </span>
<span class="s">          elementFormDefault=&quot;qualified&quot; attributeFormDefault=&quot;unqualified&quot;&gt;</span>
<span class="s">            &lt;xs:element name=&quot;foo&quot;&gt;</span>
<span class="s">              &lt;xs:complexType&gt;</span>
<span class="s">                &lt;xs:sequence&gt;</span>
<span class="s">                  &lt;xs:element name=&quot;bar&quot; type=&quot;xs:int&quot; maxOccurs=&quot;unbounded&quot; /&gt;</span>
<span class="s">                  &lt;xs:element name=&quot;baz&quot; type=&quot;xs:date&quot; minOccurs=&quot;1&quot; /&gt;</span>
<span class="s">                &lt;/xs:sequence&gt;</span>
<span class="s">              &lt;/xs:complexType&gt;</span>
<span class="s">            &lt;/xs:element&gt;</span>
<span class="s">        &lt;/xs:schema&gt;&quot;&quot;&quot;</span><span class="o">&gt;</span>
</code></pre></td>
</tr>
</table>
<p>here a valid xml element is parsed as an instance of the provided type, with two properties corresponding
to <code>bar</code>and <code>baz</code> elements, where the former is an array in order to hold multiple elements:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp">    <span class="k">let</span> <span class="i">foo</span> <span class="o">=</span> <span class="i">T</span><span class="o">.</span><span class="i">Parse</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">    &lt;foo&gt;</span>
<span class="s">        &lt;bar&gt;42&lt;/bar&gt;</span>
<span class="s">        &lt;bar&gt;43&lt;/bar&gt;</span>
<span class="s">        &lt;baz&gt;1957-08-13&lt;/baz&gt;</span>
<span class="s">    &lt;/foo&gt;&quot;&quot;&quot;</span>

    <span class="k">assert</span>(<span class="i">foo</span><span class="o">.</span><span class="i">Bars</span><span class="o">.</span>[<span class="n">0</span>] <span class="o">=</span> <span class="n">42</span>)
    <span class="k">assert</span>(<span class="i">foo</span><span class="o">.</span><span class="i">Bars</span><span class="o">.</span>[<span class="n">1</span>] <span class="o">=</span> <span class="n">43</span>)
    <span class="k">assert</span>(<span class="i">foo</span><span class="o">.</span><span class="i">Baz</span> <span class="o">=</span> <span class="i">System</span><span class="o">.</span><span class="i">DateTime</span>(<span class="n">1957</span>, <span class="n">08</span>, <span class="n">13</span>))
</code></pre></td>
</tr>
</table>
<p>Instead of a sequence we may have a <code>choice</code>:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp">    <span class="k">type</span> <span class="i">T</span> <span class="o">=</span> <span class="i">XmlProvider</span><span class="o">&lt;</span><span class="i">Schema</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">        &lt;xs:schema xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot; </span>
<span class="s">          elementFormDefault=&quot;qualified&quot; attributeFormDefault=&quot;unqualified&quot;&gt;</span>
<span class="s">            &lt;xs:element name=&quot;foo&quot;&gt;</span>
<span class="s">              &lt;xs:complexType&gt;</span>
<span class="s">                &lt;xs:choice&gt;</span>
<span class="s">                  &lt;xs:element name=&quot;bar&quot; type=&quot;xs:int&quot; maxOccurs=&quot;unbounded&quot; /&gt;</span>
<span class="s">                  &lt;xs:element name=&quot;baz&quot; type=&quot;xs:date&quot; minOccurs=&quot;1&quot; /&gt;</span>
<span class="s">                &lt;/xs:choice&gt;</span>
<span class="s">              &lt;/xs:complexType&gt;</span>
<span class="s">            &lt;/xs:element&gt;</span>
<span class="s">        &lt;/xs:schema&gt;&quot;&quot;&quot;</span><span class="o">&gt;</span>
</code></pre></td>
</tr>
</table>
<p>although a choice is akin to a union type in F#, the provided type still has
properties for <code>bar</code> and <code>baz</code> directly available on the <code>foo</code> object; in fact
the properties representing alternatives in a choice are simply made optional
(notice that for arrays this is not even necessary because an array can be empty).
This decision is due to technical limitations (discriminated unions are not supported
in type providers) but also preferred by the authors because it improves discoverability:
intellisense can show both alternatives. There is a lack of precision but this is not the main goal.</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp">    <span class="k">let</span> <span class="i">foo</span> <span class="o">=</span> <span class="i">T</span><span class="o">.</span><span class="i">Parse</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">    &lt;foo&gt;</span>
<span class="s">      &lt;baz&gt;1957-08-13&lt;/baz&gt;</span>
<span class="s">    &lt;/foo&gt;&quot;&quot;&quot;</span>
    <span class="k">assert</span>(<span class="i">foo</span><span class="o">.</span><span class="i">Bars</span><span class="o">.</span><span class="i">Length</span> <span class="o">=</span> <span class="n">0</span>)
    <span class="k">assert</span>(<span class="i">foo</span><span class="o">.</span><span class="i">Baz</span> <span class="o">=</span> <span class="i">Some</span> (<span class="i">System</span><span class="o">.</span><span class="i">DateTime</span>(<span class="n">1957</span>, <span class="n">08</span>, <span class="n">13</span>)))
</code></pre></td>
</tr>
</table>
<p>Another xsd construct to model the content of an element is <code>all</code>, which is used less often and
it's like a sequence where the order of elements does not matter. The corresponding provided type
in fact is essentially the same as for a sequence.</p>


        </div>
        <div class="span3">
          <img src="/FSharp.Data.Xsd/img/logo.png" alt="F# Project" style="width:150px;margin:10px" />  
          <ul class="nav nav-list" id="menu" style="margin-top: 20px;">
            <li class="nav-header">FSharp.Data.Xsd</li>
            <li><a href="/FSharp.Data.Xsd/index.html">Home page</a></li>
            <li class="divider"></li>
            <li><a href="http://nuget.org/packages/FSharp.Data.Xsd">Get Library via NuGet</a></li>
            <li><a href="http://github.com/fsprojects/FSharp.Data.Xsd">Source Code on GitHub</a></li>
            <li><a href="/FSharp.Data.Xsd/license.html">License</a></li>
            <li><a href="/FSharp.Data.Xsd/release-notes.html">Release Notes</a></li>
            
            <li class="nav-header">Getting started</li>
            <li><a href="/FSharp.Data.Xsd/tutorial.html">Tutorial</a></li>
            
            <li class="nav-header">Documentation</li>
            <li><a href="/FSharp.Data.Xsd/sequences.html">Sequence and Choice</a></li>
            <li><a href="/FSharp.Data.Xsd/substitutions.html">Substitution Groups</a></li>
            <li><a href="/FSharp.Data.Xsd/design.html">Design Notes</a></li>
          </ul>
        </div>
      </div>
    </div>
    <a href="http://github.com/fsprojects/FSharp.Data.Xsd"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png" alt="Fork me on GitHub"/></a>
  </body>
  </html>
